const body=document.body,main=document.querySelector("main.generated"),favs=document.querySelector("main.favorites"),controls=document.querySelector(".control");let globals={swatchCount:64,css:!1,T:{vibrant:{name:"Vibrant",hue:[0,360],saturation:[97,100],light:[49,56]},pastel:{name:"Pastel",hue:[0,360],saturation:[80,100],light:[62,82]},random:{name:"Random",hue:[0,360],saturation:[0,100],light:[0,100]}}};const put=(e,t)=>e.forEach((n,s)=>t.appendChild(e[s])),make=(e,t=[])=>{let n=document.createElement(e);return t.forEach((e,s)=>n.classList.add(t[s])),n},id=()=>Math.random().toString(36).substr(2,4),createID=()=>`${id()}-${id()}-${id()}`,msg=e=>{let n=document.querySelector(".notification-message");n!=null&&n.remove();let t=make("div",["notification-message"]);t.innerText=e,setTimeout(()=>t.style.animation="unset",350),setTimeout(()=>t.style.opacity=0,3e3),setTimeout(()=>t.remove(),3500),put([t],body)},copyToClipboard=(e,t=!1)=>{const n=make("textarea");n.value=e,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",put([n],body),n.select(),document.execCommand("copy"),body.removeChild(n),msg(t?`ðŸ‘Œ Copied to clipboard!`:`ðŸ‘Œ Copied to clipboard: ${e}`)},encode=e=>btoa(e),decode=e=>atob(e),randomNumberBetween=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),angle=()=>randomNumberBetween(0,360),hsl=(e,t,n)=>`hsl(${e},${t}%, ${n}%)`,gradient=(e,t,n)=>`linear-gradient(${e}deg,${t}0%,${n} 100%)`,gradientID=(e,t,n)=>`${e}${t}${n}`,hsl_Hex=(e,t,n)=>{n/=100;const o=t*Math.min(n,1-n)/100,s=t=>{const s=(t+e/30)%12,i=n-o*Math.max(Math.min(s-3,9-s,1),-1);return Math.round(255*i).toString(16).padStart(2,"0")};return`#${s(0)}${s(8)}${s(4)}`},getBaseTint=()=>randomNumberBetween(gradientTypeHue[0],gradientTypeHue[1]),getTintVariation=e=>{let t=e+randomNumberBetween(16,70);return t>360&&(t=t-360),t},getLightValue=()=>randomNumberBetween(gradientTypeLight[0],gradientTypeLight[1]),getSaturation=()=>randomNumberBetween(gradientTypeSaturation[0],gradientTypeSaturation[1]),storageID="swatch-gallery-favorites",saveToStorage=e=>localStorage.setItem(storageID,JSON.stringify(e)),storageStructure=(e,t,n,s)=>{let o={id:e,hex:[t,n],deg:s};return o},hasFavorites=()=>null!=localStorage.getItem(storageID),favoriteGradient=(e,t,n,s)=>{if(hasFavorites()){let o=JSON.parse(localStorage.getItem(storageID)),i=o.map(e=>e.id).indexOf(e);i==-1?o.push(storageStructure(e,t,n,s)):o.splice(i,1),saveToStorage(o)}else{let o=[];o.push(storageStructure(e,t,n,s)),saveToStorage(o)}createFavoriteGallery()},createSwatchInfo=(e=[],t,n)=>{let o=make("div",["info"]),i=make("div",["stops-wrap"]),a=make("div",["favorite-wrap"]),s=make("div",["make-favorite"]);if(hasFavorites()){let e=JSON.parse(localStorage.getItem(storageID)),n=e.map(e=>e.id).indexOf(t);n!=-1&&s.classList.add("active")}return s.addEventListener("click",()=>{if(s.classList.toggle("active"),favoriteGradient(t,e[0],e[1],n),!s.classList.contains("active")){let e=document.querySelector(`[data-id="${t}"] .active`);e!==null&&e.classList.toggle("active")}}),put([s],a),e.forEach((e)=>{let n=make("div",["stop"]),s=make("div",["preview"]),o=make("div",["text"]);s.style.backgroundColor=e,o.innerText=e,n.addEventListener("click",()=>copyToClipboard(e)),put([s,o],n),put([n],i)}),put([i,a],o),o},createTile=(e=!1)=>{let s=make("div",["wrap"]),n=make("div",["swatch"]),o=make("div",["info"]),t={};if(e==!1){let a=getBaseTint(),u=getSaturation(),d=getLightValue(),r=getTintVariation(a),l=getSaturation(),c=getLightValue(),e=angle(),m=hsl(a,u,d),f=hsl(r,l,c),p=gradient(e,m,f),i=hsl_Hex(a,u,d),o=hsl_Hex(r,l,c),h=encode(gradientID(e,i,o));n.style.backgroundImage=p,s.setAttribute("data-id",h),put([n,createSwatchInfo([i,o],h,e)],s),t.deg=e,t.s1=i,t.s2=o}else n.style.backgroundImage=`linear-gradient(${e.deg}deg,${e.hex[0]} 0%,${e.hex[1]} 100%)`,put([n,createSwatchInfo([e.hex[0],e.hex[1]],e.id,e.deg)],s),t.deg=e.deg,t.s1=e.hex[0],t.s2=e.hex[1];return put([fullscreenButton(n),codeToggle(t)],n),s},fullscreenButton=e=>{let t=make("div",["fullscreen-btn"]);return t.addEventListener("click",()=>openFullscreen(e)),t},hideSwatchControls=e=>{let t=[e.querySelector(".css-toggle"),e.querySelector(".fullscreen-btn")];t.forEach(e=>e.style.opacity=0),e.addEventListener("fullscreenchange",e=>{document.fullscreenElement||t.forEach(e=>e.style.opacity=null)})},openFullscreen=e=>{e.requestFullscreen?(e.requestFullscreen(),hideSwatchControls(e)):e.webkitRequestFullscreen?(elem.webkitRequestFullscreen(),hideSwatchControls(e)):e.msRequestFullscreen&&(e.msRequestFullscreen(),hideSwatchControls(e))},codeToggle=e=>{let t=make("div",["css-toggle"]);return t.innerText="CSS",t.addEventListener("click",()=>showCodeOverlay(e)),t},createCSSCode=(e,t)=>{let n=`
  <span class="p">background:</span> <span class="b">${t}</span>(<span class="o">${e.deg}deg</span>, <span class="o">${e.s1.slice(0,1)}</span><span class="b">${e.s1.slice(1).toUpperCase()}</span> <span class="o">0%</span>, <span class="o">${e.s2.slice(0,1)}</span><span class="b">${e.s2.slice(1).toUpperCase()}</span> <span class="o">100%</span>)<span class="p">;</span>`;return n},closeMultipleElements=e=>e.forEach(e=>closeElement(e)),closeElement=e=>{e.style.opacity=0,setTimeout(()=>e.remove(),350)},showCodeOverlay=e=>{let t=make("div",["code-overlay"]),n=make("div",["code-overlay-backdrop"]),a=make("div",["headline"]),s=make("code"),o=make("div",["copy-cta"]),i=make("div",["close-overlay"]),r=make("i"),c=[i,n],l=[t,n];a.innerText="Copy CSS code",o.innerText="Copy CSS",s.innerHTML=`
    ${createCSSCode(e,"linear-gradient")}
    <br>
    <br>
    <i>// For older Browsers:</i><br>
    ${createCSSCode(e,"-webkit-linear-gradient")}
    <br>
    ${createCSSCode(e,"-moz-linear-gradient")}
    <br>
    ${createCSSCode(e,"-o-linear-gradient")}
    `,t.style.opacity=0,setTimeout(()=>t.style.opacity=1,1),c.forEach(e=>e.addEventListener("click",()=>closeMultipleElements(l))),o.addEventListener("click",()=>copyToClipboard(s.innerText,!0)),put([r],i),put([i,a,s,o],t),put([n,t],body)},createMainGallery=e=>{main.innerHTML="";let t=0;for(;t<e;)put([createTile()],main),t++},createEmptyFavorites=e=>e.innerHTML="<div class=empty><span>Your favorited swatches will appear here.</span></div>",createFavoriteGallery=()=>{if(favs.innerHTML="",hasFavorites()){let e=JSON.parse(localStorage.getItem(storageID));e.length==0?createEmptyFavorites(favs):e.forEach(e=>put([createTile(e)],favs))}else createEmptyFavorites(favs)},setGlobalGradientType=()=>{gradientTypeHue=globals.T[gradientType].hue,gradientTypeSaturation=globals.T[gradientType].saturation,gradientTypeLight=globals.T[gradientType].light},repopulateMainGallery=()=>{createMainGallery(globals.swatchCount),msg(`âœ¨ Generated ${globals.T[gradientType].name} Gallery.`)},generateNewGalleryButton=()=>{let e=make("div",["cta"]);return e.innerText="Generate New Gallery",e.addEventListener("click",()=>repopulateMainGallery()),e},gradientSwitcher=()=>{let e=make("div",["switcher"]),t=make("div",["active-switcher",gradientType]);put([t],e);for(const[s,o]of Object.entries(globals.T)){let n=make("div",["item"]);n.innerText=globals.T[s].name,gradientType==s&&n.classList.add("active-select"),n.addEventListener("click",()=>{t.classList.remove(gradientType),gradientType=s,t.classList.add(gradientType),setGlobalGradientType(),repopulateMainGallery()}),put([n],e)}return e},createTopLevelControls=()=>put([gradientSwitcher(),generateNewGalleryButton()],controls),init=()=>{createTopLevelControls(),createMainGallery(globals.swatchCount),createFavoriteGallery()};let gradientType="vibrant",gradientTypeHue=globals.T[gradientType].hue,gradientTypeSaturation=globals.T[gradientType].saturation,gradientTypeLight=globals.T[gradientType].light;init()